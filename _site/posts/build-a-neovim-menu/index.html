<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Build a neovim menu without external dependencies" />
<meta property="og:locale" content="en" />
<meta name="description" content="Wow, it‚Äôs been quite a long time since my last post. I‚Äôm still a vim addict, but I moved to neovim in the recent years, and today I wanna share a quick trick that you might find useful." />
<meta property="og:description" content="Wow, it‚Äôs been quite a long time since my last post. I‚Äôm still a vim addict, but I moved to neovim in the recent years, and today I wanna share a quick trick that you might find useful." />
<link rel="canonical" href="https://www.andreaschiavini.com/posts/build-a-neovim-menu/" />
<meta property="og:url" content="https://www.andreaschiavini.com/posts/build-a-neovim-menu/" />
<meta property="og:site_name" content="Andrea Schiavini" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-11-16T21:41:49+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Build a neovim menu without external dependencies" />
<meta name="twitter:site" content="@metalelf0" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-11-16T21:41:49+01:00","datePublished":"2024-11-16T21:41:49+01:00","description":"Wow, it‚Äôs been quite a long time since my last post. I‚Äôm still a vim addict, but I moved to neovim in the recent years, and today I wanna share a quick trick that you might find useful.","headline":"Build a neovim menu without external dependencies","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.andreaschiavini.com/posts/build-a-neovim-menu/"},"url":"https://www.andreaschiavini.com/posts/build-a-neovim-menu/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Build a neovim menu without external dependencies | Andrea Schiavini
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Andrea Schiavini">
<meta name="application-name" content="Andrea Schiavini">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/metalelf0.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Andrea Schiavini</a>
    <p class="site-subtitle fst-italic mb-0">metalelf0 personal website</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/photos/" class="nav-link">
            <i class="fa-fw fas fa-camera"></i>
            

            <span>PHOTOS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/metalelf0"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/metalelf0"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['metalelf0gmail.com',''].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/metalelf0"
          aria-label="linkedin"
          

          

          

          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
      

      
        <a
          href="https://stackoverflow.com/users/165339/metalelf0"
          aria-label="stack-overflow"
          

          

          

          
        >
          <i class="fab fa-stack-overflow"></i>
        </a>
      
    
      

      
        <a
          href="https://flickr.com/metalelf0"
          aria-label="flickr"
          

          

          

          
        >
          <i class="fab fa-flickr"></i>
        </a>
      
    
      

      
        <a
          href="https://www.reddit.com/user/metalelf0/"
          aria-label="reddit"
          

          

          

          
        >
          <i class="fa-brands fa-reddit"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Build a neovim menu without external dependencies</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  

  
  

  

  
  

  




<!-- return -->










<article class="px-1" data-toc="false">
  <header>
    <h1 data-toc-skip>Build a neovim menu without external dependencies</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1731789709"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Nov 16, 2024
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/metalelf0">Andrea Schiavini</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="834 words"
>
  <em>4 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  

  <div class="content">
    <p>Wow, it‚Äôs been quite a long time since my last post. I‚Äôm still a vim addict, but I moved to neovim in the recent years, and today I wanna share a quick trick that you might find useful.</p>

<p>I‚Äôm going to build a custom interactive menu with custom options. I‚Äôll use it to access some files whose location I often forget, but you‚Äôll see how easy it is to customize it to do anything you want. And the best part is, you don‚Äôt need any external plugin to use it :)</p>

<p>Here‚Äôs an example of how it‚Äôs looking:</p>

<p><a href="/assets/images/2024-11-15-build-a-neovim-menu/quick-menu.png" class="popup img-link  shimmer"><img src="/assets/images/2024-11-15-build-a-neovim-menu/quick-menu.png" alt="quick menu screenshot" loading="lazy"></a></p>

<p>And here‚Äôs the code, which I‚Äôll explain line by line:</p>

<div class="language-lua highlighter-rouge"><div class="code-header">
        <span data-label-text="Lua"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="rouge-code"><pre>
<span class="kd">local</span> <span class="n">M</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">local</span> <span class="n">core</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"lib/core"</span><span class="p">)</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditNeovimConfig</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">command</span> <span class="o">=</span> <span class="s2">":e "</span> <span class="o">..</span> <span class="n">core</span><span class="p">.</span><span class="n">get_configdir</span><span class="p">()</span> <span class="o">..</span> <span class="s2">"/init.lua"</span><span class="p">,</span>
	<span class="n">description</span> <span class="o">=</span> <span class="s2">"ÓöÆ Edit neovim config"</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditBatConfig</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/.config/bat/config"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"ü¶á Edit bat config"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditInbox</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/iCloud-Obsidian/work/inbox.md"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üì• Inbox"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditKittyConfig</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/.config/kitty/kitty.conf"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üê± Edit kitty config"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditLazygitConfig</span> <span class="o">=</span>
	<span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/Library/Application Support/lazygit/config.yml"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üî± Edit lazygit config"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditWeztermConfig</span> <span class="o">=</span>
	<span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/.config/wezterm/wezterm.lua"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üîß Edit Wezterm config"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">EditGhosttyConfig</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":e ~/.config/ghostty/config"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üëª Edit Ghostty config"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">.</span><span class="n">SourceCurrentLuaFile</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="n">command</span> <span class="o">=</span> <span class="s2">":luafile %"</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">"üèÑ Lua: source current file"</span>
<span class="p">}</span>

<span class="n">M</span><span class="p">.</span><span class="n">run</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
	<span class="n">vim</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="nb">select</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">tbl_keys</span><span class="p">(</span><span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">),</span> <span class="p">{</span>
		<span class="n">prompt</span> <span class="o">=</span> <span class="s2">"Whattya wanna do?"</span><span class="p">,</span>
		<span class="n">format_item</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">[</span><span class="n">item</span><span class="p">].</span><span class="n">description</span>
		<span class="k">end</span><span class="p">,</span>
	<span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
		<span class="kd">local</span> <span class="n">chosen_command</span> <span class="o">=</span> <span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">[</span><span class="n">choice</span><span class="p">]</span>
		<span class="n">vim</span><span class="p">.</span><span class="n">cmd</span><span class="p">(</span><span class="n">chosen_command</span><span class="p">.</span><span class="n">command</span><span class="p">)</span>
	<span class="k">end</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">return</span> <span class="n">M</span>
</pre></td></tr></tbody></table></code></div></div>

<p>This is a classic Lua module. I saved it under <code class="language-plaintext highlighter-rouge">lua/user/quick-menu.lua</code> in my neovim config dir.</p>

<p>To show the available commands, get the user input and execute the chosen command, we‚Äôre going to use the <code class="language-plaintext highlighter-rouge">vim.ui.select</code> function from neovim.</p>

<p>As you can see in the documentation (<code class="language-plaintext highlighter-rouge">:h vim.ui.select()</code>), here‚Äôs what this function does:</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>vim.ui.select({items}, {opts}, {on_choice})                  *vim.ui.select()*
    Prompts the user to pick from a list of items, allowing arbitrary
    (potentially asynchronous) work until `on_choice`.
</pre></td></tr></tbody></table></code></div></div>

<p>The documentation also gives us an example:</p>

<div class="language-lua highlighter-rouge"><div class="code-header">
        <span data-label-text="Lua"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="n">vim</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="nb">select</span><span class="p">({</span> <span class="s1">'tabs'</span><span class="p">,</span> <span class="s1">'spaces'</span> <span class="p">},</span> <span class="p">{</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="s1">'Select tabs or spaces:'</span><span class="p">,</span>
    <span class="n">format_item</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">"I'd like to choose "</span> <span class="o">..</span> <span class="n">item</span>
    <span class="k">end</span><span class="p">,</span>
<span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">'spaces'</span> <span class="k">then</span>
        <span class="n">vim</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">expandtab</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="k">else</span>
        <span class="n">vim</span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="n">expandtab</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>So, we need:</p>
<ul>
  <li>a set of options to be picked (in the example, <code class="language-plaintext highlighter-rouge">tabs</code> and <code class="language-plaintext highlighter-rouge">spaces</code>);</li>
  <li>a <code class="language-plaintext highlighter-rouge">format_item</code> function that takes an item as an input and returns a string description of the option;</li>
  <li>a function to be executed once <code class="language-plaintext highlighter-rouge">choice</code> has been picked.</li>
</ul>

<p>If we have just a couple options, it‚Äôs fine to inline them as in the example; but if we need something more complicated, like in our menu, a custom data structure will be handy. So, we‚Äôre going to define a <code class="language-plaintext highlighter-rouge">M.commands</code> table, where each row will include the <code class="language-plaintext highlighter-rouge">command</code> to be executed when chosen, and the <code class="language-plaintext highlighter-rouge">description</code> to be displayed to the user.</p>

<p>Our module will also expose a <code class="language-plaintext highlighter-rouge">run</code> method that will be responsible of calling <code class="language-plaintext highlighter-rouge">vim.ui.select</code> and bind our table to make everything work.</p>

<p>Let‚Äôs look at the <code class="language-plaintext highlighter-rouge">run</code> method again:</p>

<div class="language-lua highlighter-rouge"><div class="code-header">
        <span data-label-text="Lua"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="n">M</span><span class="p">.</span><span class="n">run</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
	<span class="n">vim</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="nb">select</span><span class="p">(</span><span class="n">vim</span><span class="p">.</span><span class="n">tbl_keys</span><span class="p">(</span><span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">),</span> <span class="p">{</span>
		<span class="n">prompt</span> <span class="o">=</span> <span class="s2">"Whattya wanna do?"</span><span class="p">,</span>
		<span class="n">format_item</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">[</span><span class="n">item</span><span class="p">].</span><span class="n">description</span>
		<span class="k">end</span><span class="p">,</span>
	<span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
		<span class="kd">local</span> <span class="n">chosen_command</span> <span class="o">=</span> <span class="n">M</span><span class="p">.</span><span class="n">commands</span><span class="p">[</span><span class="n">choice</span><span class="p">]</span>
		<span class="n">vim</span><span class="p">.</span><span class="n">cmd</span><span class="p">(</span><span class="n">chosen_command</span><span class="p">.</span><span class="n">command</span><span class="p">)</span>
	<span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p>The list of available options to be displayed can be extracted from the <code class="language-plaintext highlighter-rouge">M.commands</code> table with <code class="language-plaintext highlighter-rouge">vim.tbl_keys</code>, an utility function that extracts keys from a lua table. This will return the list of keys in the <code class="language-plaintext highlighter-rouge">M.commands</code> table, so <code class="language-plaintext highlighter-rouge">EditNeovimConfig</code>, <code class="language-plaintext highlighter-rouge">EditKittyConfig</code> and so on.</p>

<p>The next step is to write the <code class="language-plaintext highlighter-rouge">format_item</code> function, that will take an item (e.g. <code class="language-plaintext highlighter-rouge">EditNeovimConfig</code>) and will need to return its description. It‚Äôs pretty easy, as we just need to read the <code class="language-plaintext highlighter-rouge">M.commands[item]</code> row and get its <code class="language-plaintext highlighter-rouge">description</code>.</p>

<p>Finally, once the user has picked a command, we need to execute it. Every <code class="language-plaintext highlighter-rouge">command</code> in our <code class="language-plaintext highlighter-rouge">M.commands</code> is a vimscript command that can be executed with the <code class="language-plaintext highlighter-rouge">vim.cmd</code> shorthand, so reading it and executing is pretty straightforward.</p>

<p>Now that everything is in place, we just need to setup a key binding to trigger the menu. I have this under <code class="language-plaintext highlighter-rouge">&lt;Leader&gt;hL</code>, and here‚Äôs how to do it:</p>

<div class="language-lua highlighter-rouge"><div class="code-header">
        <span data-label-text="Lua"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">vim</span><span class="p">.</span><span class="n">keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s2">"n"</span><span class="p">,</span> <span class="s2">"&lt;leader&gt;hL"</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
	<span class="nb">require</span><span class="p">(</span><span class="s2">"user.quick-menu"</span><span class="p">).</span><span class="n">run</span><span class="p">()</span>
<span class="k">end</span><span class="p">,</span> <span class="p">{</span> <span class="n">desc</span> <span class="o">=</span> <span class="s2">"Quick menu"</span> <span class="p">})</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Put this in any neovim config file, restart neovim and you will be ready to go!</p>

<p>I hope everything is clear, feel free to ask in the comments below if you need any further info.</p>

<p>Thanks for your time!</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/posts/">posts</a>,
          <a href="/categories/technical/">technical</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/neovim/"
            class="post-tag no-text-decoration"
          >neovim</a>
        
          <a
            href="/tags/lua/"
            class="post-tag no-text-decoration"
          >lua</a>
        
          <a
            href="/tags/tutorial/"
            class="post-tag no-text-decoration"
          >tutorial</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Build%20a%20neovim%20menu%20without%20external%20dependencies%20-%20Andrea%20Schiavini&url=https%3A%2F%2Fwww.andreaschiavini.com%2Fposts%2Fbuild-a-neovim-menu%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Build%20a%20neovim%20menu%20without%20external%20dependencies%20-%20Andrea%20Schiavini&u=https%3A%2F%2Fwww.andreaschiavini.com%2Fposts%2Fbuild-a-neovim-menu%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.andreaschiavini.com%2Fposts%2Fbuild-a-neovim-menu%2F&text=Build%20a%20neovim%20menu%20without%20external%20dependencies%20-%20Andrea%20Schiavini" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/github-pages-dns-takeover/">The github pages DNS takeover incident</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/easily-change-the-path-for-your-paperclip-attachments/">Easily change the path for your Paperclip attachments</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/fluentd-usage-example-with-bash-and-ruby/">Fluentd usage example with bash and ruby</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/null-objects-in-rails/">Null objects in Rails</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/git-preview-conflicts-without-touching-the-working-copy/">Git: preview conflicts</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rails/">rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vim/">vim</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/oop/">oop</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/activerecord/">activerecord</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/db/">db</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/design/">design</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/neovim/">neovim</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/test/">test</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/textmate/">textmate</a>
      
    </div>
  </section>


            </div>

            
              
              







            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/change-vim-colorscheme-based-on-iterm/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1482102000"
  data-df="ll"
  
>
  Dec 19, 2016
</time>

              <h4 class="pt-0 my-2">Vim - Change Colorscheme Based on Iterm profile</h4>
              <div class="text-muted">
                <p>I like to change my (neo)vim colorscheme quite frequently, and when I do I want it to match my iterm colors. Many colorscheme authors also provide an iterm color palette, so you can import the .ite...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/the-right-colors-for-your-vim/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1328486400"
  data-df="ll"
  
>
  Feb  6, 2012
</time>

              <h4 class="pt-0 my-2">The right colors for your VIM</h4>
              <div class="text-muted">
                <p>I have a lot of Vim colorschemes, and I like to change them very often, reflecting my mood. I needed a way to showcase them all and quickly pick one.

The original Vim Color Scheme Test script by m...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/using-virtual-attributes-for-multi-parameter-form-helpers-in-rails/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1319760000"
  data-df="ll"
  
>
  Oct 28, 2011
</time>

              <h4 class="pt-0 my-2">Using virtual attributes for multi parameter form helpers in Rails</h4>
              <div class="text-muted">
                <p>In a Rails application I am working on, I needed to setup a form with a field with a non-standard behaviour. The field represents a Date object, so the date_select FormHelper looked great; however,...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/change-vim-colorscheme-based-on-iterm/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Vim - Change Colorscheme Based on Iterm profile</p>
    </a>
  

  
    <a
      href="/posts/github-pages-dns-takeover/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>The github pages DNS takeover incident</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>¬©
    <time>2025</time>

    
      <a href="https://twitter.com/metalelf0">Andrea Schiavini</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.2.4"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rails/">rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vim/">vim</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/oop/">oop</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/activerecord/">activerecord</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/db/">db</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/design/">design</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/neovim/">neovim</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/test/">test</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/textmate/">textmate</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script>
  (function () {
    const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed');
    const initTheme = themeMapper[Theme.visualState];

    let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) {
      lang = lang.slice(0, 2);
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'metalelf0/metalelf0.github.com',
      'data-repo-id': 'MDEwOlJlcG9zaXRvcnkzMjA4MjI0',
      'data-category': 'Post comments',
      'data-category-id': 'DIC_kwDOADD0IM4Clpn4',
      'data-mapping': 'title',
      'data-strict' : '0',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'top',
      'data-lang': lang,
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusNode = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusNode.setAttribute(key, value)
    );

    const $footer = document.querySelector('footer');
    $footer.insertAdjacentElement("beforebegin", giscusNode);

    addEventListener('message', (event) => {
      if (event.source === window && event.data && event.data.id === Theme.ID) {
        const newTheme = themeMapper[Theme.visualState];

        const message = {
          setConfig: {
            theme: newTheme
          }
        };

        const giscus =
          document.getElementsByClassName('giscus-frame')[0].contentWindow;
        giscus.postMessage({ giscus: message }, 'https://giscus.app');
      }
    });
  })();
</script>



    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

