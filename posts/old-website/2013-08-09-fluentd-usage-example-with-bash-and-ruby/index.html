<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Fluentd usage example with bash and ruby | metalelf0.github.io</title><meta name=keywords content="ruby,logging,json,fluentd,bash,shell"><meta name=description content="Fluentd is an open source tool to collect events and logs. Its architecture allows to easily collect logs from different input sources and redirect them to different output sinks. Some input examples are HTTP, syslog, or apache logs, and some output sinks are files, mail, and databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to extract only the significative parts from each of them; saving this structured information on a DB allows much easier log searching and analysis."><meta name=author content="metalelf0"><link rel=canonical href=https://metalelf0.github.io/posts/old-website/2013-08-09-fluentd-usage-example-with-bash-and-ruby/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Fluentd usage example with bash and ruby"><meta property="og:description" content="Fluentd is an open source tool to collect events and logs. Its architecture allows to easily collect logs from different input sources and redirect them to different output sinks. Some input examples are HTTP, syslog, or apache logs, and some output sinks are files, mail, and databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to extract only the significative parts from each of them; saving this structured information on a DB allows much easier log searching and analysis."><meta property="og:type" content="article"><meta property="og:url" content="https://metalelf0.github.io/posts/old-website/2013-08-09-fluentd-usage-example-with-bash-and-ruby/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-08-09T00:00:00+00:00"><meta property="article:modified_time" content="2013-08-09T00:00:00+00:00"><meta property="og:site_name" content="metalelf0.github.com"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fluentd usage example with bash and ruby"><meta name=twitter:description content="Fluentd is an open source tool to collect events and logs. Its architecture allows to easily collect logs from different input sources and redirect them to different output sinks. Some input examples are HTTP, syslog, or apache logs, and some output sinks are files, mail, and databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to extract only the significative parts from each of them; saving this structured information on a DB allows much easier log searching and analysis."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://metalelf0.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Fluentd usage example with bash and ruby","item":"https://metalelf0.github.io/posts/old-website/2013-08-09-fluentd-usage-example-with-bash-and-ruby/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fluentd usage example with bash and ruby","name":"Fluentd usage example with bash and ruby","description":"Fluentd is an open source tool to collect events and logs. Its architecture allows to easily collect logs from different input sources and redirect them to different output sinks. Some input examples are HTTP, syslog, or apache logs, and some output sinks are files, mail, and databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to extract only the significative parts from each of them; saving this structured information on a DB allows much easier log searching and analysis.","keywords":["ruby","logging","json","fluentd","bash","shell"],"articleBody":"Fluentd is an open source tool to collect events and logs. Its architecture allows to easily collect logs from different input sources and redirect them to different output sinks. Some input examples are HTTP, syslog, or apache logs, and some output sinks are files, mail, and databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to extract only the significative parts from each of them; saving this structured information on a DB allows much easier log searching and analysis.\nThe fluentd architecture can be extended with ruby plugins to support input sources and output destinations; for the scope of this example, we will use:\n MongoDB plugin for Fluent event collector; fluent-logger rubygem; the built-in tcp input and stdout output.  Installing fluentd server The first thing to do is installing the fluentd server. You can easily do this via rubygems (beware it requires at least ruby 1.9.2):\n$ gem install fluentd  When you’re done you can create a setup file:\n$ fluentd -s ~/.fluentd  This will create the file ~/.fluentd/fluent.conf and setup the ~/.fluent/plugins folder.\nThe fluentd.conf file Edit the configuration file with your favourite editor (which is vim, of course), and make it look like this:\n## built-in TCP input ## $ echo  | fluent-cat   type forward port 24224  ## match tag=fluentd.test.** and dump to console type stdout  type mongo host 127.0.0.1 port 27017 database fluentd collection test # for capped collection capped capped_size 1024m # flush flush_interval 1s  You can see it’s made of three parts:\n The first one is the default HTTP source input. It listens for JSON messages on port 24224. The second one is the default standard output. The match fluentd.test.** line tells fluentd to forward all messages matching the given pattern to the chosen standard output. The third block is the MongoDB output. It requires the MongoDB plugin cited above to be installed, but we’ll talk about this later.  Let’s start the server and keep it running in foreground, to easily see incoming messages:\n$ fluentd -c ~/.fluent/fluent.conf  Logging from bash to STDOUT Now, let’s prepare a sample bash script to log things to fluentd. Open another terminal, create a bash script and paste the following content:\n#!/bin/sh  fluent_log(){  local project=\"$1\"  local script_name=\"$2\"  local message=\"$3\"  echo \"{\\\"\"project\\\"\":\\\"\"$project\"\\\",\\\"\"script_name\\\"\":\\\"\"$script_name\"\\\",\\\"\"message\\\"\":\\\"\"$message\\\"\"}\" | fluent-cat fluentd.test.log }  fluent_log \"Library\" \"Reload books\" \"Started\" As you can see I created a wrapper function to make it easier to redirect logs to fluentd. Save the file, make it executable and run it. You should see output like this in your server:\n2013-08-09 17:01:06 +0200 [trace]: plugin/in_forward.rb:150:initialize: accepted fluent socket object_id=70144024060720 2013-08-09 17:01:06 +0200 fluentd.test.log: {\"project\":\"Library\",\"script_name\":\"Reload books\",\"message\":\"Started\"} 2013-08-09 17:01:06 +0200 [trace]: plugin/in_forward.rb:191:on_close: closed fluent socket object_id=70144024060720  This is telling us that fluentd is accepting input from the fluent-cat command and it is redirecting it to standard output, according to the first rule.\nLogging from bash to MongoDB To go on in our test, we need to install MongoDB. Use the best way depending on your system (I used homebrew on my mac), run it and connect to its console via the mongo command.\nNow, in the previous bash script, change the target of fluent-cat from fluentd.test.log to mongo.log. Save it, run it again, and type this in your MongoDB console:\n$ db.test.find()  This time you should see an entry in the test collection:\n{ \"_id\" : ObjectId(\"5204dfee9f60b167da000004\"), \"project\" : \"Library\", \"script_name\" : \"Reload books\", \"message\" : \"Started\", \"time\" : ISODate(\"2013-08-09T12:26:22Z\") }  Logging from bash to MongoDB Let’s see how to achieve the same result in a ruby script. Install the fluent-logger rubygem with\n$ gem install fluent-logger  Then create a ruby script with the following content:\n#!/usr/bin/env ruby  require 'rubygems' require 'fluent-logger'  def fluent_log project, script_name, message  Fluent::Logger::FluentLogger.open(nil, :host='localhost', :port=24224)  Fluent::Logger.post(\"mongo.log\", {:project = project, :script_name = script_name, :message = message }) end  fluent_log \"Library\", \"Update books\", \"Completed\" Run it, rerun the query in the MongoDB console, and a new entry should be present.\n{ \"_id\" : ObjectId(\"5204dfee9f60b167da000005\"), \"project\" : \"Library\", \"script_name\" : \"Reload books\", \"message\" : \"Completed\", \"time\" : ISODate(\"2013-08-09T12:46:32Z\") }  Final considerations The ease of use of fluentd allows to quickly setup a centralized log system in just a few hours. You could use any tool you want to browse data in the MongoDB database. You can make elaborate statistics, build charts, and do everything you want with it. According to the fluentd website, its simple architecture allows it to run with very good performances:\n\"Fluentd’s performance has been proven in the field: its largest user currently collects logs from 5000+ servers, 5 TB of daily data, handling 50,000 msgs/sec at peak time.\"  So, I hope this post helped you to understand what this tool is about. I suggest you to check out the fluentd documentation to know more, it’s really complete and clear. If you found this post useful, feel free to drop me a line :)\n","wordCount":"818","inLanguage":"en","datePublished":"2013-08-09T00:00:00Z","dateModified":"2013-08-09T00:00:00Z","author":{"@type":"Person","name":"metalelf0"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://metalelf0.github.io/posts/old-website/2013-08-09-fluentd-usage-example-with-bash-and-ruby/"},"publisher":{"@type":"Organization","name":"metalelf0.github.io","logo":{"@type":"ImageObject","url":"https://metalelf0.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://metalelf0.github.io accesskey=h title="metalelf0.github.io (Alt + H)">metalelf0.github.io</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://metalelf0.github.io>Home</a>&nbsp;»&nbsp;<a href=https://metalelf0.github.io/posts/>Posts</a></div><h1 class=post-title>Fluentd usage example with bash and ruby</h1><div class=post-meta><span title="2013-08-09 00:00:00 +0000 UTC">August 9, 2013</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;metalelf0</div></header><div class=post-content><p><img loading=lazy src=images/fluentd2.png alt="fluentd logo"></p><p><a href=http://fluentd.org/>Fluentd</a> is an open source tool to collect events and
logs. Its architecture allows to easily collect logs from different input
sources and redirect them to different output sinks. Some input examples are
HTTP, syslog, or apache logs, and some output sinks are files, mail, and
databases (both RDBMS and NoSQL ones). Also, it allows to parse logs and to
extract only the significative parts from each of them; saving this
structured information on a DB allows much easier log searching and analysis.</p><p>The fluentd architecture can be extended with ruby plugins to support input
sources and output destinations; for the scope of this example, we will use:</p><ul><li><a href=https://github.com/fluent/fluent-plugin-mongo>MongoDB plugin for Fluent event collector</a>;</li><li><a href=https://github.com/fluent/fluent-logger-ruby>fluent-logger rubygem</a>;</li><li>the built-in tcp input and stdout output.</li></ul><h3 id=installing-fluentd-server>Installing fluentd server<a hidden class=anchor aria-hidden=true href=#installing-fluentd-server>#</a></h3><p>The first thing to do is installing the fluentd server. You can easily do this
via rubygems (beware it requires at least ruby 1.9.2):</p><pre><code>$ gem install fluentd
</code></pre><p>When you&rsquo;re done you can create a setup file:</p><pre><code>$ fluentd -s ~/.fluentd
</code></pre><p>This will create the file <code>~/.fluentd/fluent.conf</code> and setup the <code>~/.fluent/plugins</code> folder.</p><h3 id=the-fluentdconf-file>The fluentd.conf file<a hidden class=anchor aria-hidden=true href=#the-fluentdconf-file>#</a></h3><p>Edit the configuration file with your favourite editor (which is vim, of
course), and make it look like this:</p><pre tabindex=0><code class=language-conf data-lang=conf>## built-in TCP input
## $ echo &lt;json&gt; | fluent-cat &lt;tag&gt;
&lt;source&gt;
  type forward
  port 24224
&lt;/source&gt;

## match tag=fluentd.test.** and dump to console
&lt;match fluentd.test.**&gt;
  type stdout
&lt;/match&gt;

&lt;match mongo.**&gt;
  type mongo
  host 127.0.0.1
  port 27017
  database fluentd
  collection test

  # for capped collection
  capped
  capped_size 1024m

  # flush
  flush_interval 1s
&lt;/match&gt;
</code></pre><p>You can see it&rsquo;s made of three parts:</p><ol><li>The first one is the default HTTP source input. It listens for JSON messages
on port <code>24224</code>.</li><li>The second one is the default standard output. The <code>match fluentd.test.**</code>
line tells fluentd to forward all messages matching the given pattern to the
chosen standard output.</li><li>The third block is the MongoDB output. It requires the MongoDB plugin cited
above to be installed, but we&rsquo;ll talk about this later.</li></ol><p>Let&rsquo;s start the server and keep it running in foreground, to easily see
incoming messages:</p><pre><code>$ fluentd -c ~/.fluent/fluent.conf
</code></pre><h3 id=logging-from-bash-to-stdout>Logging from bash to STDOUT<a hidden class=anchor aria-hidden=true href=#logging-from-bash-to-stdout>#</a></h3><p>Now, let&rsquo;s prepare a sample bash script to log things to <code>fluentd</code>. Open
another terminal, create a bash script and paste the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>fluent_log<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>  local project<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  local script_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  local message<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$3<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;{\&#34;&#34;</span>project<span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;:\&#34;&#34;</span>$project<span style=color:#e6db74>&#34;\&#34;,\&#34;&#34;</span>script_name<span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;:\&#34;&#34;</span>$script_name<span style=color:#e6db74>&#34;\&#34;,\&#34;&#34;</span>message<span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;:\&#34;&#34;</span>$message<span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;}&#34;</span> | fluent-cat fluentd.test.log
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fluent_log <span style=color:#e6db74>&#34;Library&#34;</span> <span style=color:#e6db74>&#34;Reload books&#34;</span> <span style=color:#e6db74>&#34;Started&#34;</span>
</span></span></code></pre></div><p>As you can see I created a wrapper function to make it easier to redirect logs
to <code>fluentd</code>. Save the file, make it executable and run it. You should see output
like this in your server:</p><pre><code>2013-08-09 17:01:06 +0200 [trace]: plugin/in_forward.rb:150:initialize: accepted fluent socket object_id=70144024060720
2013-08-09 17:01:06 +0200 fluentd.test.log: {&quot;project&quot;:&quot;Library&quot;,&quot;script_name&quot;:&quot;Reload books&quot;,&quot;message&quot;:&quot;Started&quot;}
2013-08-09 17:01:06 +0200 [trace]: plugin/in_forward.rb:191:on_close: closed fluent socket object_id=70144024060720
</code></pre><p>This is telling us that <code>fluentd</code> is accepting input from the <code>fluent-cat</code> command
and it is redirecting it to standard output, according to the first rule.</p><h3 id=logging-from-bash-to-mongodb>Logging from bash to MongoDB<a hidden class=anchor aria-hidden=true href=#logging-from-bash-to-mongodb>#</a></h3><p>To go on in our test, we need to install MongoDB. Use the best way depending on
your system (I used <code>homebrew</code> on my mac), run it and connect to its console via
the <code>mongo</code> command.</p><p>Now, in the previous bash script, change the target of <code>fluent-cat</code> from
<code>fluentd.test.log</code> to <code>mongo.log</code>. Save it, run it again, and type this in your
MongoDB console:</p><pre><code>$ db.test.find()
</code></pre><p>This time you should see an entry in the <code>test</code> collection:</p><pre><code>{ &quot;_id&quot; : ObjectId(&quot;5204dfee9f60b167da000004&quot;), &quot;project&quot; : &quot;Library&quot;, &quot;script_name&quot; : &quot;Reload books&quot;, &quot;message&quot; : &quot;Started&quot;, &quot;time&quot; : ISODate(&quot;2013-08-09T12:26:22Z&quot;) }
</code></pre><h3 id=logging-from-bash-to-mongodb-1>Logging from bash to MongoDB<a hidden class=anchor aria-hidden=true href=#logging-from-bash-to-mongodb-1>#</a></h3><p>Let&rsquo;s see how to achieve the same result in a ruby script. Install the fluent-logger
rubygem with</p><pre><code>$ gem install fluent-logger
</code></pre><p>Then create a ruby script with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env ruby</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>require <span style=color:#e6db74>&#39;rubygems&#39;</span>
</span></span><span style=display:flex><span>require <span style=color:#e6db74>&#39;fluent-logger&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fluent_log</span> project, script_name, message
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>Fluent</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Logger</span><span style=color:#f92672>::</span><span style=color:#66d9ef>FluentLogger</span><span style=color:#f92672>.</span>open(<span style=color:#66d9ef>nil</span>, <span style=color:#e6db74>:host</span><span style=color:#f92672>=&gt;</span><span style=color:#e6db74>&#39;localhost&#39;</span>, <span style=color:#e6db74>:port</span><span style=color:#f92672>=&gt;</span><span style=color:#ae81ff>24224</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>Fluent</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Logger</span><span style=color:#f92672>.</span>post(<span style=color:#e6db74>&#34;mongo.log&#34;</span>, {<span style=color:#e6db74>:project</span> <span style=color:#f92672>=&gt;</span> project, <span style=color:#e6db74>:script_name</span> <span style=color:#f92672>=&gt;</span> script_name, <span style=color:#e6db74>:message</span> <span style=color:#f92672>=&gt;</span> message })
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fluent_log <span style=color:#e6db74>&#34;Library&#34;</span>, <span style=color:#e6db74>&#34;Update books&#34;</span>, <span style=color:#e6db74>&#34;Completed&#34;</span>
</span></span></code></pre></div><p>Run it, rerun the query in the MongoDB console, and a new entry should be present.</p><pre><code>{ &quot;_id&quot; : ObjectId(&quot;5204dfee9f60b167da000005&quot;), &quot;project&quot; : &quot;Library&quot;, &quot;script_name&quot; : &quot;Reload books&quot;, &quot;message&quot; : &quot;Completed&quot;, &quot;time&quot; : ISODate(&quot;2013-08-09T12:46:32Z&quot;) }
</code></pre><h3 id=final-considerations>Final considerations<a hidden class=anchor aria-hidden=true href=#final-considerations>#</a></h3><p>The ease of use of <code>fluentd</code> allows to quickly setup a centralized log system in
just a few hours. You could use any tool you want to browse data in the MongoDB
database. You can make elaborate statistics, build charts, and do everything you
want with it. According to the <code>fluentd</code> website, its simple architecture allows
it to run with very good performances:</p><pre><code>&quot;Fluentd’s performance has been proven in the field: its largest user
currently collects logs from 5000+ servers, 5 TB of daily data, handling
50,000 msgs/sec at peak time.&quot;
</code></pre><p>So, I hope this post helped you to understand what this tool is about. I
suggest you to check out the <a href=http://docs.fluentd.org/articles/quickstart>fluentd
documentation</a> to know more, it&rsquo;s
really complete and clear. If you found this post useful, feel free to drop me
a line :)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://metalelf0.github.io/tags/ruby/>ruby</a></li><li><a href=https://metalelf0.github.io/tags/logging/>logging</a></li><li><a href=https://metalelf0.github.io/tags/json/>json</a></li><li><a href=https://metalelf0.github.io/tags/fluentd/>fluentd</a></li><li><a href=https://metalelf0.github.io/tags/bash/>bash</a></li><li><a href=https://metalelf0.github.io/tags/shell/>shell</a></li></ul><nav class=paginav><a class=prev href=https://metalelf0.github.io/posts/old-website/2013-12-23-null-objects-in-rails/><span class=title>« Prev Page</span><br><span>Null objects in Rails</span></a>
<a class=next href=https://metalelf0.github.io/posts/old-website/2012-12-10-easily-change-the-path-for-your-paperclip-attachments/><span class=title>Next Page »</span><br><span>Easily change the path for your Paperclip attachments</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on twitter" href="https://twitter.com/intent/tweet/?text=Fluentd%20usage%20example%20with%20bash%20and%20ruby&url=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f&hashtags=ruby%2clogging%2cjson%2cfluentd%2cbash%2cshell"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f&title=Fluentd%20usage%20example%20with%20bash%20and%20ruby&summary=Fluentd%20usage%20example%20with%20bash%20and%20ruby&source=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f&title=Fluentd%20usage%20example%20with%20bash%20and%20ruby"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on whatsapp" href="https://api.whatsapp.com/send?text=Fluentd%20usage%20example%20with%20bash%20and%20ruby%20-%20https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Fluentd usage example with bash and ruby on telegram" href="https://telegram.me/share/url?text=Fluentd%20usage%20example%20with%20bash%20and%20ruby&url=https%3a%2f%2fmetalelf0.github.io%2fposts%2fold-website%2f2013-08-09-fluentd-usage-example-with-bash-and-ruby%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//metalelf0-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://metalelf0.github.io>metalelf0.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>