---
layout: default
---

{% include lang.html %}

<style>
  /* Theme-aware card styling */
  .photo-album-card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border-color);
    border-radius: 0.375rem;
    overflow: hidden;
  }

  /* Make entire card clickable */
  .photo-album-card {
    cursor: pointer;
  }

  /* No hover effects or shimmer on images */
  .photo-album-card .album-thumbnail {
    position: relative;
    overflow: hidden;
  }

  .photo-album-card .album-cover-link {
    display: block;
    text-decoration: none;
    border: none;
  }

  .photo-album-card img {
    height: 250px;
    object-fit: cover;
    display: block;
    width: 100%;
    cursor: pointer;
  }

  /* Override Chirpy theme's shimmer effect - use stronger selectors */
  .photo-album-card .album-thumbnail img,
  .photo-album-card .album-thumbnail a img,
  .photo-album-card img.no-shimmer {
    transition: none !important;
    transform: none !important;
    animation: none !important;
  }

  .photo-album-card .album-thumbnail img:hover,
  .photo-album-card .album-thumbnail a img:hover,
  .photo-album-card img.no-shimmer:hover {
    transform: none !important;
    animation: none !important;
  }

  /* Disable shimmer class specifically in album cards */
  .photo-album-card .shimmer {
    animation: none !important;
  }

  .photo-album-card .card-body {
    padding: 1rem;
  }

  /* Light mode */
  [data-mode="light"] .photo-album-card {
    --card-bg: #ffffff;
    --card-border-color: #dee2e6;
  }

  /* Dark mode */
  [data-mode="dark"] .photo-album-card {
    --card-bg: #1e1e1e;
    --card-border-color: #3d3d3d;
  }
</style>

<script>
  // Make album cards clickable and prevent lightbox
  document.addEventListener('DOMContentLoaded', function() {
    const albumCards = document.querySelectorAll('.photo-album-card');

    albumCards.forEach(function(card) {
      const albumUrl = card.getAttribute('data-album-url');

      // Handle clicks on the album cover link
      const coverLink = card.querySelector('.album-cover-link');
      if (coverLink) {
        coverLink.addEventListener('click', function(e) {
          // Prevent any lightbox or other handlers
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();

          // Navigate to album
          window.location.href = albumUrl;
        }, true); // Use capture phase to run before other handlers
      }

      // Prevent popup links inside the cover from opening lightbox
      const thumbnail = card.querySelector('.album-thumbnail');
      if (thumbnail) {
        thumbnail.addEventListener('click', function(e) {
          // If clicking on a popup link inside thumbnail, prevent it
          const popupLink = e.target.closest('a.popup');
          if (popupLink) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();

            // Navigate to album instead
            window.location.href = albumUrl;
          }
        }, true);
      }

      // Make entire card clickable except for links
      card.addEventListener('click', function(e) {
        // If clicking on the View Album button, let it handle navigation
        const viewButton = e.target.closest('.btn');
        if (viewButton) {
          return;
        }

        // If clicking anywhere else on the card, navigate to album
        if (albumUrl) {
          window.location.href = albumUrl;
        }
      });
    });
  });
</script>

<article class="px-1">
  <h1 class="dynamic-title">My photos</h1>

  <div class="content">
    {% if site.data.photo_albums.size > 0 %}
      <div class="row">
        {% for album in site.data.photo_albums %}
          <div class="col-md-6 col-lg-4 mb-4">
            <div class="photo-album-card" data-album-url="{{ album.url | relative_url }}">
              {% if album.thumbnail_url %}
                <div class="album-thumbnail">
                  <a href="{{ album.url | relative_url }}" class="album-cover-link">
                    <img src="{{ album.thumbnail_url | relative_url }}" alt="{{ album.title }}" class="no-shimmer">
                  </a>
                </div>
              {% endif %}
              <div class="card-body">
                <h5 class="card-title">{{ album.title }}</h5>
                {% if album.date %}
                  <p class="card-text text-muted">
                    <small>{{ album.date | date: "%B %d, %Y" }}</small>
                  </p>
                {% endif %}
                <p class="card-text">
                  <i class="fas fa-images"></i> {{ album.photo_count }} photo{% if album.photo_count != 1 %}s{% endif %}
                </p>
                <a href="{{ album.url | relative_url }}" class="btn btn-primary btn-sm">View Album</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info" role="alert">
        <i class="fas fa-info-circle"></i> No photo albums found. Add photos to the <code>photos/albums/</code> directory to get started.
      </div>
      <p>
        To create a new album, create a folder in <code>photos/albums/</code> with the format:
        <code>YYYY-MM-DD-album-name</code> (e.g., <code>2025-12-12-paris</code>) and add your images.
      </p>
    {% endif %}
  </div>
</article>
